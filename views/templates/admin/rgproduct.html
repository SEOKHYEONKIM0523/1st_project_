<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>상품등록</title>
    <style>
        form > div {width : 800px}
        {#form > div > div > div {display: inline-block}#}

        input {padding : 5px; width: 200px; margin-top: 5px}
        select {padding : 5px; width : 150px; margin-top: 5px}

        #firstline {float : left; width : 700px; margin-bottom: 15px; border: 1px solid black}
        #firstline > div {float : left; border: 1px solid black}
        #firstline > div:first-child {margin-right: 20px}
        form > div > div > * {display: block;}
        {##firstline > div > div:first-child {width:170px}#}

        #secondline {float : left; width : 700px; margin-bottom: 1px; border: 1px solid black}
        #secondline > div {float : left; border: 1px solid black}
        #secondline > div:first-child {margin-right: 20px}

        form > div:nth-child(3) {padding-top: 10px;  border: 1px solid black}


        {##secondline > div > div:first-child {width:170px}#}

        /* float 성질 제거 */
        .clearfix { content : ""; display: block;
            clear: both; }
    </style>
</head>
<body>
    <main>
        <h2>상품등록</h2>
        <form name="productfrm">
            <div id="firstline">
                <div>
                    <label for="prdname">상품이름</label>
                    <input type="text" name="prdname" id="prdname" placeholder="상품 이름을 입력하세요">
                </div>
                <div>
                    <label for="stack">상품수량</label>
                    <input type="text" name="stack" id="stack" placeholder="상품 수량을 입력하세요">
                </div>
            </div>
            <div id="secondline" class="clearfix">
                <div>
                    <label for="price">상품원가</label>
                    <input type="text" name="price" id="price" placeholder="상품 원가를 입력하세요">
                </div>
                <div>
                    <label for="category">상품 카테고리</label>
                    <select name="category" id="category">
                        <option value="oxford">oxford</option>
                        <option value="knitwear">knitwear</option>
                        <option value="neckwear">neckwear</option>
                    </select>
                </div>
            </div>
            <div class="clearfix">
                <div>
                    <label for="img">첨부파일</label>
                </div>
                <input type="text" name="img" id="img">
            </div>
            <div>
                <button type="button">이전 단계로</button>
                <button type="button" id="registerbtn">등록하기</button>
            </div>
        </form>
    </main>
    <script>
        let registerbtn = document.querySelector('#registerbtn');
        let productfrm = document.productfrm;
        registerbtn.addEventListener('click', () =>{
            const formData = new FormData(productfrm);

            let jsondata = {};
            formData.forEach((val, key) => {
                jsondata[key] = val
            });

            fetch('http://127.0.0.1:8000/admin/rgproduct', {
                method: 'POST',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(jsondata),
                redirect: 'follow'
            })
                .then((res) => {
                    if (res.redirected) location.href = res.url
                })
                .catch((err) => console.log(err));

        })
    </script>
</body>
</html>